import{_ as i,c as a,o as e,ag as n}from"./chunks/framework.DPDPlp3K.js";const r=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/extend.md","filePath":"guide/extend.md"}'),l={name:"guide/extend.md"};function t(p,s,h,d,k,c){return e(),a("div",null,s[0]||(s[0]=[n(`<p>!!! danger &quot;Changelog&quot; - <code>v1.7.x</code> 版本的 <code>Merge配置</code> 改名为 <code>扩展配置</code> ，且prepend/append功能移动至订阅右键菜单中的可视化编辑器中实现（例如：prepend-rules移动至订阅右键菜单的 <code>编辑规则</code> 中的 <code>prepend</code>）。扩展配置仅用于配置项覆写/合并。 - <code>v1.7.x</code> 版本的 <code>Script配置</code> 改名为 <code>扩展脚本</code> 。 - <code>v1.6.x</code> 版本请参考 <a href="./merge.html">Merge配置</a> 和 <a href="./script.html">Script配置</a>。</p><h2 id="扩展分类" tabindex="-1">扩展分类 <a class="header-anchor" href="#扩展分类" aria-label="Permalink to &quot;扩展分类&quot;">​</a></h2><ul><li>根据文件类型，扩展可分为 <code>配置</code> 和 <code>脚本</code> 。<code>配置</code> 使用 <code>yaml</code> 对配置进行覆写/合并， <code>脚本</code> 使用 <code>javascript</code> 对配置进行更加灵活的调整。</li><li>根据作用范围，扩展可分为 <code>全局扩展</code> 和 <code>订阅扩展</code> 。全局扩展适用于设置大多数订阅均会生效的项，需要特殊处理的订阅使用订阅扩展进行单独调整。</li><li><strong>这些扩展会同时生效</strong>，按照以下执行链路的顺序执行，对配置文件进行修改。</li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[&quot;全局扩展配置&quot;] --&gt; B[&quot;全局扩展脚本&quot;] --&gt; C[&quot;订阅扩展配置&quot;] --&gt; D[&quot;订阅扩展脚本&quot;]</span></span></code></pre></div><h2 id="扩展教程" tabindex="-1">扩展教程 <a class="header-anchor" href="#扩展教程" aria-label="Permalink to &quot;扩展教程&quot;">​</a></h2><p>右键配置卡片，选择编辑扩展/脚本，即可进入编辑器。</p><h3 id="扩展配置" tabindex="-1">扩展配置 <a class="header-anchor" href="#扩展配置" aria-label="Permalink to &quot;扩展配置&quot;">​</a></h3><p>假设有三个订阅文件，配置片段如下。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 订阅A</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ipv6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 订阅B</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">unified-delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ipv6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 订阅C</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">find-process-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">strict</span></span></code></pre></div><p>现如有如下需求：</p><ul><li>所有订阅均启用 DNS 。</li><li>所有订阅均禁用 <code>unified-delay</code> 。</li><li>订阅 A 进程匹配模式修改为 <code>always</code> 。</li><li>除了订阅 C 外， DNS 均启用 <code>ipv6</code> 。</li></ul><p>我们可以将如下配置添加到全局扩展配置中。分别对各配置生效。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ipv6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">unified-delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><p>同时，将如下配置添加到订阅 A 的扩展配置中。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">find-process-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span></code></pre></div><p>同时，将如下配置添加到订阅 C 的扩展配置中。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ipv6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><h3 id="扩展脚本" tabindex="-1">扩展脚本 <a class="header-anchor" href="#扩展脚本" aria-label="Permalink to &quot;扩展脚本&quot;">​</a></h3><p>扩展脚本较 <code>v1.6.x</code> 无变动，可参考<a href="./script.html">Script 配置</a>。</p><div class="tip custom-block"><p class="custom-block-title">🎉 节点推荐</p><p>🚀 <a href="https://www.xn--9kqrm7t.com/#/register?code=JRtE5uIV" target="_blank" rel="noreferrer">优信云</a>：IEPL/IPLC 高速专线，￥15.00/月</p></div>`,20)]))}const g=i(l,[["render",t]]);export{r as __pageData,g as default};
